<!-- ===== MODAL INVENTARIO PRODUCTOS ===== -->
<div class="modal fade" id="productsModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl">
    <div class="modal-content border-0 shadow-lg">
      <div class="modal-header modal-header-products">
        <h5 class="modal-title"><i class="fas fa-boxes me-2"></i> Inventario de Productos</h5>
        <button class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body p-4">
        <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2">
          <div class="d-flex gap-2">
            <input id="product-search" class="form-control product-search-input"
              placeholder="游댌 Buscar por nombre o c칩digo">
            <select id="filter-category" class="form-select w-auto rounded-pill">
              <option value="">Todas las categor칤as</option>
            </select>
          </div>
          <button id="btn-new-product" class="btn btn-outline-primary fw-semibold">
            <i class="fas fa-plus-circle me-1"></i> Nuevo Producto
          </button>
        </div>

        <div class="table-responsive">
          <table class="table table-hover align-middle products-table">
            <thead>
              <tr>
                <th>C칩digo</th>
                <th>Producto</th>
                <th>Categor칤a</th>
                <th>Precio</th>
                <th>Stock</th>
                <th class="text-center">Acciones</th>
              </tr>
            </thead>
            <tbody id="products-table-body"></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ===== MODAL FORM PRODUCTO ===== -->
<!-- ===== MODAL FORM PRODUCTO ===== -->
<div class="modal fade" id="productFormModal" tabindex="-1">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content product-form-content">
      <div class="modal-header modal-header-products">
        <h5 class="modal-title" id="productFormTitle">Nuevo Producto</h5>
        <button class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        <form id="form-product-core">
          <div class="row g-3">

            <!-- IMAGEN -->
            <div class="col-md-4">
              <label class="form-label fw-bold small">Imagen</label>
              <div id="prod-img-preview"
                class="border rounded bg-light d-flex justify-content-center align-items-center mb-2"
                style="height:150px">
                <i class="fas fa-image fa-3x text-muted"></i>
              </div>
              <input type="file" id="prod-file-input" class="form-control form-control-sm">
            </div>

            <!-- DATOS SUPERIORES -->
            <div class="col-md-8">
              <div class="row g-2">
                <div class="col-md-6">
                  <label class="form-label fw-bold small">C칩digo de Barras</label>
                  <input id="prod-barcode" class="form-control bg-light">
                </div>

                <div class="col-md-6">
                  <label class="form-label fw-bold small">Nombre del Producto *</label>
                  <input id="prod-name" class="form-control" required>
                </div>

                <!-- DESCRIPCI칍N ALINEADA CON IMAGEN -->
                <div class="col-12">
                  <label class="form-label fw-bold small">Descripci칩n</label>
                  <textarea id="prod-desc" rows="4" class="form-control"></textarea>
                </div>
              </div>
            </div>

            <!-- PRECIOS Y STOCK (MISMA FILA) -->
            <div class="col-md-3">
              <label class="form-label fw-bold small">Precio Compra</label>
              <input id="prod-price-buy" type="number" step="0.01" class="form-control">
            </div>

            <div class="col-md-3">
              <label class="form-label fw-bold small">Precio Venta *</label>
              <input id="prod-price-sell" type="number" step="0.01" class="form-control" required>
            </div>

            <div class="col-md-3">
              <label class="form-label fw-bold small">Stock Actual</label>
              <input id="prod-stock" type="number" class="form-control">
            </div>

            <div class="col-md-3">
              <label class="form-label fw-bold small">Stock M칤nimo</label>
              <input id="prod-stock-min" type="number" class="form-control">
            </div>

            <!-- CATEGOR칈A Y UNIDAD -->
            <div class="col-md-6">
              <label class="form-label fw-bold small">Categor칤a *</label>
              <div class="d-flex gap-2">
                <select id="prod-category" class="form-select"></select>
                <button type="button" id="btn-add-category"
                  class="btn btn-outline-secondary btn-sm">+</button>
              </div>

              <div id="new-category-box" class="d-none mt-2">
                <input id="new-category-name"
                  class="form-control form-control-sm"
                  placeholder="Nueva categor칤a">
                <button id="btn-save-category"
                  type="button"
                  class="btn btn-sm btn-primary mt-1">Guardar</button>
              </div>
            </div>

            <div class="col-md-6">
              <label class="form-label fw-bold small">Unidad de Medida *</label>
              <div class="d-flex gap-2">
                <select id="prod-unit" class="form-select"></select>
                <button type="button" id="btn-add-unit"
                  class="btn btn-outline-secondary btn-sm">+</button>
              </div>

              <div id="new-unit-box" class="d-none mt-2">
                <input id="new-unit-name"
                  class="form-control form-control-sm"
                  placeholder="Nombre">
                <input id="new-unit-abbr"
                  class="form-control form-control-sm mt-1"
                  placeholder="Abreviatura">
                <button id="btn-save-unit"
                  type="button"
                  class="btn btn-sm btn-primary mt-1">Guardar</button>
              </div>
            </div>

          </div>

          <div class="form-check mt-3">
            <input id="prod-estatus" class="form-check-input" type="checkbox" checked>
            <label class="form-check-label fw-bold">
              Producto disponible para venta
            </label>
          </div>
        </form>
      </div>

      <div class="modal-footer bg-light border-0">
        <button class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button id="btn-save-product" class="btn btn-primary px-4">
          <i class="fas fa-save me-1"></i> Guardar Producto
        </button>
      </div>
    </div>
  </div>
</div>

